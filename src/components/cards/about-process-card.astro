---
import CustomImage from "../ui/image.astro";

interface Props {
  id: string;
  title: string;
  description: string;
  imageUrl: string;
  index: number;
}

const { id, title, description, imageUrl, index } = Astro.props;
---

<div
  class:list={[
    "group relative flex flex-col h-full",
    `motion-preset-slide-up motion-delay-${(index + 1) * 150}`,
  ]}
>
  <!-- Background Number (Subtle & Elegant) -->
  <span
    class="absolute -top-10 -left-4 font-serif text-[10rem] font-bold text-primary/5 leading-none select-none pointer-events-none group-hover:text-primary/10 transition-colors duration-500"
  >
    {id}
  </span>

  <div class="relative flex flex-col h-full z-10">
    <!-- Image Card -->
    <div
      class="relative mb-8 aspect-square overflow-hidden rounded-3xl shadow-xl shadow-black/5 ring-1 ring-border/50 group-hover:shadow-primary/5 transition-all duration-500"
    >
      <CustomImage
        src={imageUrl}
        alt={title}
        aspectRatio="1/1"
        class="group-hover:scale-110 transition-transform duration-700 ease-out"
      />

      <!-- Step Badge -->
      <div class="absolute top-4 right-4 z-20">
        <div
          class="bg-primary text-primary-foreground w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg shadow-lg shadow-primary/20 scale-90 group-hover:scale-100 transition-all duration-500"
        >
          {id}
        </div>
      </div>

      <!-- Overlay for texture -->
      <div
        class="absolute inset-0 bg-linear-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"
      >
      </div>
    </div>

    <!-- Content -->
    <div class="flex flex-col flex-1 px-2">
      <div class="flex items-center gap-3 mb-4">
        <span
          class="w-8 h-px bg-primary/30 group-hover:w-12 transition-all duration-500"
        ></span>
        <h3
          class="font-serif text-2xl font-bold text-foreground group-hover:text-primary transition-colors duration-300"
        >
          {title}
        </h3>
      </div>

      <p
        class="text-muted-foreground leading-relaxed text-lg group-hover:text-foreground/80 transition-colors duration-300"
      >
        {description}
      </p>
    </div>
  </div>

  <!-- Decorative Accent -->
  <div
    class="absolute -bottom-2 left-2 right-2 h-0.5 bg-linear-to-r from-primary/0 via-primary/20 to-primary/0 scale-x-0 group-hover:scale-x-100 transition-transform duration-700 origin-center"
  >
  </div>
</div>
